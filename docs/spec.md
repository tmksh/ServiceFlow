# ServiceFlow プロジェクト仕様書

> **文書バージョン**: 1.0  
> **最終更新日**: 2026年2月13日  
> **ステータス**: Phase 1（UIプロトタイプ）完了 / Phase 2（実装）未着手

---

## 目次

1. [プロジェクト概要](#1-プロジェクト概要)
2. [ビジネス要件](#2-ビジネス要件)
3. [システムアーキテクチャ](#3-システムアーキテクチャ)
4. [機能仕様](#4-機能仕様)
5. [データモデル](#5-データモデル)
6. [画面仕様](#6-画面仕様)
7. [外部連携](#7-外部連携)
8. [非機能要件](#8-非機能要件)
9. [開発規約](#9-開発規約)
10. [開発計画](#10-開発計画)
11. [競合分析サマリー](#11-競合分析サマリー)
12. [リポジトリ構成（現状）](#12-リポジトリ構成現状)
13. [参照資料](#13-参照資料)

---

## 1. プロジェクト概要

### 1.1 プロダクト名

**ServiceFlow** — 自動顧客管理プラットフォーム

### 1.2 コンセプト

> 一般消費者向け生活サービス業に特化した、オールインワン案件管理プラットフォーム

### 1.3 対象業種

| 業種カテゴリ | ID | カラーコード |
|:---|:---|:---|
| 不用品回収 | `fuyouhin` | `#6366f1` |
| 引っ越し | `hikkoshi` | `#8b5cf6` |
| ハウスクリーニング | `cleaning` | `#06b6d4` |
| 水道修理 | `suidou` | `#3b82f6` |
| 鍵トラブル | `kagi` | `#f59e0b` |
| 修理・メンテナンス | `repair` | `#10b981` |

### 1.4 解決する課題

現在の業務フローでは、**LINE・TimeTree・Googleスプレッドシート**間で手動による情報転記が行われており、以下の問題が発生している。

- 月間1,000件超の案件を手作業で処理する膨大な工数
- 対応漏れ・情報更新の遅延による事業リスク
- 非効率な業務による機会損失（月額約50万円相当）

### 1.5 提供価値

- LINE経由の問い合わせを**自動で案件登録**（手動転記の撲滅）
- 案件の発生から完了、売上分析までを**一気通貫で自動化**
- **リアルタイム通知**による対応漏れの防止
- **経営ダッシュボード**によるデータドリブンな意思決定支援

---

## 2. ビジネス要件

### 2.1 ビジネスモデル

| 項目 | 内容 |
|:---|:---|
| サービス形態 | SaaS（月額サブスクリプション） |
| 価格設定 | 月額 ¥30,000〜¥50,000 |
| 収益目標 | 1年後：契約100社、年間売上1億円 |
| 収益配分 | 営業利益の50:50（開発側：事業側） |
| 追加オプション | 年間契約割引、初期導入サポートプラン |

### 2.2 パートナーシップ体制

| 役割 | 担当 | 主な責務 |
|:---|:---|:---|
| 開発パートナー | 加藤様サイド | システム設計・開発・保守・アップデート |
| 事業パートナー | iwatakento様サイド | 業界ノウハウ提供・営業活動・テストマーケティング |

### 2.3 市場ポジション

- **ターゲット市場**: 生活サービス業（ブルーオーシャン領域）
- **差別化要因**: LINE連携 × 業界特化 × スケジュール管理 × 売上分析の統合
- **参入障壁**: 一度導入されると業務フローに深く定着 → 低解約率

---

## 3. システムアーキテクチャ

### 3.1 技術スタック

| レイヤー | 技術 | 備考 |
|:---|:---|:---|
| **フロントエンド（Web）** | Next.js / React / TypeScript / Tailwind CSS | PC向けWebアプリ |
| **フロントエンド（モバイル）** | React Native / Expo / TypeScript | スマートフォンアプリ |
| **バックエンド** | Node.js / Express / TypeScript | REST API |
| **データベース** | MySQL | リレーショナルDB |
| **インフラ** | AWS or GCP（未定） | クラウドホスティング |
| **外部API** | LINE Messaging API / Google Calendar API（暫定） | 主要連携先 |

### 3.2 対応デバイス

| デバイス | 実装方法 | 主な用途 |
|:---|:---|:---|
| PC（Webブラウザ） | Next.js Webアプリ | バックオフィス操作、分析、設定 |
| スマートフォン | React Native アプリ | 現場スタッフの案件確認、ステータス更新 |

### 3.3 アーキテクチャ概要図（概念）

```
┌──────────────────────────────────────────────────┐
│                  クライアント層                      │
│  ┌─────────────┐        ┌──────────────────┐     │
│  │ Next.js Web │        │ React Native App │     │
│  │   (PC)      │        │  (Mobile)        │     │
│  └──────┬──────┘        └────────┬─────────┘     │
└─────────┼────────────────────────┼───────────────┘
          │          REST API      │
          ▼                        ▼
┌──────────────────────────────────────────────────┐
│                  サーバー層                         │
│         Node.js / Express / TypeScript            │
│  ┌──────────┐  ┌───────────┐  ┌───────────────┐ │
│  │ 案件管理  │  │ LINE連携   │  │ 分析・レポート │ │
│  └──────────┘  └───────────┘  └───────────────┘ │
└──────────────────────┬───────────────────────────┘
                       │
          ┌────────────┼────────────┐
          ▼            ▼            ▼
   ┌──────────┐ ┌───────────┐ ┌──────────┐
   │  MySQL   │ │ LINE API  │ │ Google   │
   │   DB     │ │ Messaging │ │ Calendar │
   └──────────┘ └───────────┘ └──────────┘
```

---

## 4. 機能仕様

### 4.1 機能一覧

| # | 機能分類 | 機能名 | 優先度 | 概要 |
|:---|:---|:---|:---|:---|
| F-01 | 案件自動化 | LINE自動案件登録 | **最高** | コールセンターからのLINEメッセージを解析し、案件として自動登録 |
| F-02 | 案件自動化 | キャンセル自動反映 | 高 | キャンセル連絡を自動でステータスに反映 |
| F-03 | 案件管理 | 案件CRUD | **最高** | 案件の作成・参照・更新・削除 |
| F-04 | 案件管理 | ステータス管理 | **最高** | 新規→見積→確定→対応中→完了/キャンセル の遷移管理 |
| F-05 | 案件管理 | 顧客管理 | 高 | 顧客情報の管理（VIP判定、リピーター追跡、平均単価） |
| F-06 | 案件管理 | 検索・フィルタ | 高 | ステータス・カテゴリ・期間等での絞り込み |
| F-07 | スケジュール | カレンダー表示 | **最高** | 月間カレンダー形式での案件スケジュール管理 |
| F-08 | スケジュール | 当日スケジュール | 高 | 当日の案件一覧と対応スタッフの表示 |
| F-09 | 通知 | リアルタイム通知 | **最高** | 緊急案件・当日依頼を自動判別しLINEグループへ即時通知 |
| F-10 | 通知 | アプリ内通知 | 中 | 新規案件登録・ステータス変更等のアプリ内通知 |
| F-11 | 精算 | 日報・精算管理 | 高 | 現金/クレジット決済管理、スタッフ別精算集計 |
| F-12 | 精算 | 精算エクスポート | 中 | スプレッドシートへの精算データエクスポート |
| F-13 | 分析 | ダッシュボード | **最高** | 売上・案件数・キャンセル率・平均単価のKPI表示 |
| F-14 | 分析 | 売上分析 | 高 | 月次推移、曜日別、時間帯別、カテゴリ別分析 |
| F-15 | 分析 | 広告・LP管理 | 高 | 広告媒体別ROI、CPA/ROAS/CVR計測、LP効果測定 |
| F-16 | 分析 | レポート出力 | 中 | 各種レポートの生成・エクスポート |
| F-17 | 設定 | LINE連携設定 | 高 | Webhook URL・LINEグループ連携の設定 |
| F-18 | 設定 | 通知設定 | 中 | 通知種別ごとのON/OFF設定 |
| F-19 | 設定 | 会社情報設定 | 中 | 企業名、連絡先等の基本情報 |
| F-20 | 将来拡張 | 会計ソフト連携 | 低 | freee / マネーフォワードとのAPI連携 |

### 4.2 案件ステータスフロー

```
    ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐     ┌──────┐
    │ 新規 │ ──▶ │ 見積 │ ──▶ │ 確定 │ ──▶ │対応中│ ──▶ │ 完了 │
    └──────┘     └──────┘     └──────┘     └──────┘     └──────┘
       │            │            │            │
       │            │            │            │
       ▼            ▼            ▼            ▼
    ┌────────────────────────────────────────────┐
    │              キャンセル                       │
    └────────────────────────────────────────────┘
```

| ステータス | ID | UIカラー |
|:---|:---|:---|
| 新規 | `new` | Indigo（紫青） |
| 見積 | `estimate` | Violet（紫） |
| 確定 | `confirmed` | Blue（青） |
| 対応中 | `inProgress` | Amber（黄） |
| 完了 | `completed` | Emerald（緑） |
| キャンセル | `cancelled` | Red（赤） |

### 4.3 LINE自動登録フロー

```
  コールセンター           ServiceFlow              LINEグループ
       │                      │                        │
       │  LINEメッセージ送信   │                        │
       │─────────────────────▶│                        │
       │                      │  メッセージ解析          │
       │                      │  (顧客名/住所/品目等)    │
       │                      │                        │
       │                      │  案件自動登録            │
       │                      │──────┐                 │
       │                      │      │DB登録            │
       │                      │◀─────┘                 │
       │                      │                        │
       │                      │  緊急案件判定            │
       │                      │  (当日依頼等)            │
       │                      │                        │
       │                      │  自動通知               │
       │                      │───────────────────────▶│
       │                      │                        │
```

**LINEメッセージ解析フォーマット例**:

```
神奈川　ネコ　受電　滝沢
あかざわ　たつゆき
〒248-0005
神奈川県逗子市桜山5-39-16
桜山ハイム麗生206号室
090-6195-0960
2/17　9-12時
現場のみ
2月末までに目視希望
ベッドフレーム、マットレス、布団2組、180cmくらい長椅子...
パック+初回費用
相見積もり
0217
```

**解析結果**:

| フィールド | 値 |
|:---|:---|
| 都道府県 | 神奈川県 |
| センター | ネコ |
| チャネル | 受電 |
| オペレーター | 滝沢 |
| 顧客名 | あかざわ たつゆき |
| 郵便番号 | 248-0005 |
| 住所 | 神奈川県逗子市桜山5-39-16 桜山ハイム麗生206号室 |
| 電話番号 | 090-6195-0960 |
| 希望日時 | 2/17 9-12時 |
| 品目 | ベッドフレーム、マットレス 他5品 |
| 備考 | パック+初回費用 / 相見積もり |

---

## 5. データモデル

### 5.1 主要エンティティ

#### 案件（Cases）

| フィールド | 型 | 必須 | 説明 |
|:---|:---|:---|:---|
| `id` | VARCHAR | PK | 案件ID（例: `CS-0001`） |
| `customer` | VARCHAR | YES | 顧客名 |
| `phone` | VARCHAR | YES | 電話番号 |
| `postal` | VARCHAR | YES | 郵便番号 |
| `pref` | VARCHAR | YES | 都道府県 |
| `addr` | TEXT | YES | 住所（詳細） |
| `category` | ENUM | YES | サービスカテゴリ（6種） |
| `status` | ENUM | YES | ステータス（6種） |
| `date` | DATE | YES | 対応予定日 |
| `time` | VARCHAR | NO | 対応予定時間 |
| `amount` | INT | NO | 金額（円） |
| `source` | VARCHAR | NO | 流入元（Google広告/LINE広告等） |
| `center` | VARCHAR | YES | コールセンター（ネコ/わん） |
| `channel` | ENUM | YES | 受付チャネル（受電/LINE/Web） |
| `staff` | VARCHAR | NO | 担当スタッフ |
| `items` | JSON | NO | 品目リスト |
| `pay_method` | ENUM | NO | 決済方法（cash/credit） |
| `urgent` | BOOLEAN | NO | 緊急フラグ |
| `line_auto` | BOOLEAN | NO | LINE自動登録フラグ |
| `created_at` | DATETIME | YES | 作成日時 |
| `updated_at` | DATETIME | YES | 更新日時 |

#### LINE受信メッセージ（LineMessages）

| フィールド | 型 | 必須 | 説明 |
|:---|:---|:---|:---|
| `id` | INT | PK | メッセージID |
| `center` | VARCHAR | YES | コールセンター |
| `group` | VARCHAR | YES | LINEグループ名 |
| `time` | TIME | YES | 受信時刻 |
| `status` | ENUM | YES | 処理状態（pending/registered/error） |
| `raw` | TEXT | YES | 生メッセージ |
| `parsed` | JSON | NO | 解析済みデータ |
| `case_id` | VARCHAR | FK | 紐付け案件ID |
| `created_at` | DATETIME | YES | 作成日時 |

#### 精算（Settlements）

| フィールド | 型 | 必須 | 説明 |
|:---|:---|:---|:---|
| `id` | INT | PK | 精算ID |
| `staff` | VARCHAR | YES | 担当スタッフ |
| `customer` | VARCHAR | YES | 顧客名 |
| `amount` | INT | YES | 金額 |
| `credit_extra` | INT | NO | クレジット手数料 |
| `pay` | ENUM | YES | 決済種別（cash/credit/mixed/cancel） |
| `date` | DATE | YES | 精算日 |
| `created_at` | DATETIME | YES | 作成日時 |

#### 広告プラットフォーム（Platforms）

| フィールド | 型 | 必須 | 説明 |
|:---|:---|:---|:---|
| `id` | VARCHAR | PK | プラットフォームID |
| `name` | VARCHAR | YES | プラットフォーム名 |
| `type` | ENUM | YES | 種別（リスティング/SNS/オーガニック） |

#### ランディングページ（LandingPages）

| フィールド | 型 | 必須 | 説明 |
|:---|:---|:---|:---|
| `id` | VARCHAR | PK | LP ID |
| `name` | VARCHAR | YES | LP名 |
| `url` | VARCHAR | YES | URL |
| `cat` | ENUM | YES | サービスカテゴリ |
| `platform` | VARCHAR | FK | 広告プラットフォーム |
| `area` | VARCHAR | YES | 対象エリア |
| `status` | ENUM | YES | 状態（active/paused） |
| `cost` | INT | YES | 広告費 |
| `impressions` | INT | YES | インプレッション数 |
| `clicks` | INT | YES | クリック数 |
| `cases` | INT | YES | 案件数 |
| `revenue` | INT | YES | 売上 |

### 5.2 ER図（概念）

```
┌──────────────┐       ┌──────────────┐
│   Platforms  │       │   Customers  │
│──────────────│       │──────────────│
│ id (PK)      │       │ id (PK)      │
│ name         │       │ name         │
│ type         │       │ phone        │
└──────┬───────┘       │ postal       │
       │               │ pref         │
       │               │ addr         │
       ▼               └──────┬───────┘
┌──────────────┐              │
│ LandingPages │              │
│──────────────│              │
│ id (PK)      │              │
│ platform (FK)│              │
│ cat          │              │
│ cost         │              │
│ clicks       │              │
│ cases        │              ▼
│ revenue      │       ┌──────────────┐       ┌──────────────┐
└──────────────┘       │    Cases     │       │ LineMessages │
                       │──────────────│       │──────────────│
                       │ id (PK)      │◀──────│ case_id (FK) │
                       │ customer     │       │ raw          │
                       │ category     │       │ parsed       │
                       │ status       │       │ status       │
                       │ date         │       └──────────────┘
                       │ amount       │
                       │ staff        │       ┌──────────────┐
                       │ pay_method   │       │ Settlements  │
                       │ urgent       │       │──────────────│
                       └──────────────┘       │ staff        │
                                              │ customer     │
                                              │ amount       │
                                              │ pay          │
                                              └──────────────┘
```

---

## 6. 画面仕様

### 6.1 画面構成

アプリケーションは**サイドバーナビゲーション + メインコンテンツエリア**のレイアウトを採用する。

#### グローバルナビゲーション

| # | メニュー名 | ID | アイコン | バッジ |
|:---|:---|:---|:---|:---|
| 1 | ダッシュボード | `dashboard` | Grid | — |
| 2 | LINE受信 | `line` | Inbox | 未処理件数 |
| 3 | 案件管理 | `cases` | FileText | — |
| 4 | スケジュール | `calendar` | Calendar | — |
| 5 | レポート | `reports` | BarChart | — |
| — | 設定 | `settings` | Gear | — |

※ プロトタイプには以下のページも含まれるが、ナビゲーションからは非表示（ダッシュボードやレポートからのサブページとしてアクセス）:
- 日報・精算（SettlementPage）
- 売上分析（Analytics）
- 広告・LP管理（AdLPPage）

### 6.2 各画面の仕様

#### 6.2.1 ダッシュボード（Dashboard）

**目的**: 経営状況の俯瞰、重要指標の即時把握

| セクション | 内容 |
|:---|:---|
| KPIカード（4枚） | 売上合計・案件数・キャンセル率・平均単価（前月比付き） |
| 緊急案件アラート | 当日依頼など緊急対応が必要な案件の件数表示 |
| 月次売上推移 | エリアチャートによる12ヶ月推移 |
| カテゴリ分布 | ドーナツチャートによるサービスカテゴリ別案件数 |
| 直近の案件 | 最新案件5件のリスト |
| 時間帯別案件数 | 棒グラフによる8時〜19時の案件分布 |

#### 6.2.2 LINE受信（LineInbox）

**目的**: LINEメッセージの確認・自動登録管理

| セクション | 内容 |
|:---|:---|
| Webhook接続状態 | LINE APIとの接続状態表示 |
| メッセージ一覧 | 受信メッセージのリスト（pending/registered/error） |
| 解析プレビュー | 選択メッセージの解析結果（構造化データ）表示 |
| 自動登録トグル | 自動登録のON/OFF切り替え |
| 生メッセージ表示 | 原文の確認 |

**メッセージステータス**:

| ステータス | 意味 | 表示色 |
|:---|:---|:---|
| `pending` | 未処理（確認待ち） | Amber |
| `registered` | 案件登録済み | Emerald |
| `error` | 解析エラー（情報不足等） | Red |

#### 6.2.3 案件管理（CaseMgmt）

**目的**: 全案件の一覧管理・詳細確認・顧客管理

| タブ | 内容 |
|:---|:---|
| 案件一覧 | テーブル形式の案件リスト（ステータスフィルタ、検索機能付き） |
| 顧客一覧 | 顧客リスト（VIP・リピーター判定、平均単価、累計金額） |

**案件一覧テーブルのカラム**:
- 案件ID / 顧客名 / カテゴリ / ステータス / 対応予定日時 / 金額 / 決済方法 / 担当スタッフ

**案件詳細モーダル**:
- 全フィールドの表示
- ステータス変更
- スタッフアサイン
- 品目リスト
- 備考・メモ

#### 6.2.4 スケジュール（CalView）

**目的**: カレンダー形式での案件スケジュール管理（TimeTree代替）

| セクション | 内容 |
|:---|:---|
| 月間カレンダー | 月表示のカレンダーグリッド、各日に案件数を表示 |
| 当日スケジュール | 選択日の案件リスト（時間順） |
| 月切り替え | 前月/次月のナビゲーション |

#### 6.2.5 日報・精算（SettlementPage）

**目的**: 日次の精算管理・スタッフ別集計

| セクション | 内容 |
|:---|:---|
| 精算サマリー | 当日の総売上・現金合計・クレジット合計 |
| スタッフ別内訳 | スタッフごとの精算明細テーブル |
| 自動計算 | 現金/クレジット比率の自動算出 |
| エクスポート | スプレッドシートへの出力機能 |

#### 6.2.6 売上分析（Analytics）

**目的**: 売上データの多角的分析

| セクション | 内容 |
|:---|:---|
| 月次売上推移 | エリアチャートによる12ヶ月推移 |
| 曜日別分析 | 棒グラフによる曜日ごとの案件数 |
| 広告ROI比較 | プラットフォーム別のROI比較 |
| CVR指標 | コンバージョン率のトラッキング |

#### 6.2.7 広告・LP管理（AdLPPage）

**目的**: 広告出稿とランディングページの効果測定

| セクション | 内容 |
|:---|:---|
| LP一覧 | ランディングページのリスト（パフォーマンス指標付き） |
| プラットフォーム比較 | 広告媒体ごとの比較分析 |
| トレンド分析 | 時系列でのパフォーマンス推移 |
| KPI指標 | CPA・ROAS・CVR等の自動計算 |
| LP詳細モーダル | 個別LPの詳細パフォーマンスデータ |

**対応広告プラットフォーム**:

| プラットフォーム | 種別 | カラーコード |
|:---|:---|:---|
| Google広告 | リスティング | `#4285f4` |
| Yahoo!広告 | リスティング | `#ff0033` |
| Instagram広告 | SNS | `#e1306c` |
| Facebook広告 | SNS | `#1877f2` |
| LINE広告 | SNS | `#06c755` |
| 口コミ・紹介 | オーガニック | `#f59e0b` |

#### 6.2.8 レポート（ReportsPage）

**目的**: 各種レポートの生成と出力

| 機能 | 内容 |
|:---|:---|
| レポート種別選択 | 日次/週次/月次レポートの選択 |
| レポート生成 | 選択した期間・条件でのレポート生成 |
| エクスポート | PDF/CSV形式でのダウンロード |

#### 6.2.9 設定（SetPage）

**目的**: システム設定の管理

| セクション | 内容 |
|:---|:---|
| LINE連携設定 | Webhook URL、チャネルアクセストークン、LINEグループ連携 |
| 通知設定 | 通知種別ごとのON/OFF（緊急案件、新規登録、キャンセル等） |
| 会社情報 | 企業名、連絡先、住所等の基本情報 |

---

## 7. 外部連携

### 7.1 LINE Messaging API

| 項目 | 内容 |
|:---|:---|
| 連携方式 | Webhook |
| 主な用途 | LINEグループからのメッセージ受信、案件自動登録、通知送信 |
| 参照URL | https://developers.line.biz/ja/docs/messaging-api/ |

### 7.2 Google Calendar API（暫定）

| 項目 | 内容 |
|:---|:---|
| 連携方式 | REST API |
| 主な用途 | スケジュール同期（検討中） |

### 7.3 将来的な連携候補

- **freee / マネーフォワード**: 会計ソフト連携による経理業務自動化
- **音声認識API**: 電話問い合わせのテキスト化 → 案件自動登録

---

## 8. 非機能要件

### 8.1 パフォーマンス

| 項目 | 目標 |
|:---|:---|
| ページ初期表示 | 3秒以内 |
| API応答時間 | 500ms以内（95パーセンタイル） |
| 同時接続数 | 100ユーザー以上 |
| データ処理 | 月間1,000件以上の案件処理 |

### 8.2 セキュリティ

| 項目 | 対応 |
|:---|:---|
| 認証 | JWT/セッションベースの認証（詳細設計時に決定） |
| 通信 | HTTPS必須 |
| データ保護 | 個人情報の暗号化保存 |
| アクセス制御 | ロールベースアクセスコントロール（RBAC） |

### 8.3 可用性

| 項目 | 目標 |
|:---|:---|
| 稼働率 | 99.5%以上 |
| バックアップ | 日次自動バックアップ |
| 障害復旧 | RTO: 4時間以内 |

### 8.4 レスポンシブ対応

- **ブレークポイント**: Tailwind CSS の `lg:` (1024px) を境界にモバイル/デスクトップの切り替え
- **モバイル対応**: ハンバーガーメニュー + サイドバーオーバーレイ
- **サイドバー**: 折りたたみ可能（72px ↔ 256px）

---

## 9. 開発規約

### 9.1 コーディング規約

| 項目 | ルール |
|:---|:---|
| フォーマッター | Prettier（デフォルト設定）、コミット時に自動フォーマット |
| 命名規則（変数・関数） | `camelCase` |
| 命名規則（クラス・コンポーネント） | `PascalCase` |
| 命名規則（ファイル名） | `kebab-case` |
| モジュール | ES Modules (`import/export`) |
| 型定義 | TypeScript strict、`any` の使用は原則禁止 |

### 9.2 Git運用

| 項目 | ルール |
|:---|:---|
| ブランチ戦略 | Git-flow (`main`, `develop`, `feature/issue-*`) |
| コミットメッセージ | Conventional Commits 規約準拠 |
| コミット例 | `feat: LINE自動登録機能を追加` / `fix: カレンダー表示のバグを修正` |

### 9.3 品質管理

| 項目 | ルール |
|:---|:---|
| テストフレームワーク | Jest |
| テストカバレッジ目標 | 80%以上 |
| テスト実行 | `npm test` |
| 静的解析 | ESLint（`npm run lint`） |
| ビルド | `npm run build` |
| UI検証 | スクリーンショットによるデザイン一致確認 |

### 9.4 開発方針

1. **Explore first, then plan, then code** — 不明瞭な点は調査→計画→実装の順序で進める
2. 機能実装後は必ず**テストを作成・実行**
3. 繰り返しタスクは**再利用可能なスキル**として登録

---

## 10. 開発計画

### 10.1 フェーズ概要

| フェーズ | 期間（目安） | 主な内容 | ステータス |
|:---|:---|:---|:---|
| **Phase 1** | 約1.5週間 | UIデザイン・モックアップ作成、基本設計 | **完了** |
| **Phase 2** | 約3週間〜1ヶ月 | プロトタイプ開発、主要機能実装（LINE連携、スケジュール管理）、テスト運用 | 未着手 |
| **Phase 3** | 約1〜2ヶ月 | フィードバック改善、追加機能開発、品質向上 | 未着手 |
| **リリース** | 約3〜4.5ヶ月後 | 外部へのサービス提供開始 | — |

### 10.2 Phase 1 成果物（完了）

- [x] UIプロトタイプ（`ServiceFlow.html` — React + Tailwind CSS 単一ファイル、1,889行）
- [x] 開発指示書（CLAUDE.md）
- [x] プロジェクト提案書
- [x] 競合分析レポート
- [x] 要件定義書
- [x] 議事録

### 10.3 Phase 2 で実施すべき内容

1. **プロジェクト初期化**
   - Next.js + TypeScript プロジェクトのセットアップ
   - React Native / Expo プロジェクトのセットアップ
   - ESLint / Prettier / Jest の設定
   - CI/CDパイプラインの構築

2. **コンポーネント分離**
   - HTMLプロトタイプからReactコンポーネントへの変換
   - 共通UIコンポーネントライブラリの構築
   - チャートコンポーネントの実装（BarSVG, AreaSVG, Donut等）

3. **バックエンド構築**
   - Express サーバーの構築
   - REST APIエンドポイントの実装
   - MySQL データベーススキーマの作成
   - 認証機能の実装

4. **コア機能実装**
   - LINE Messaging API 連携
   - メッセージ解析エンジン
   - 案件CRUD API
   - カレンダー/スケジュール機能
   - リアルタイム通知

---

## 11. 競合分析サマリー

### 11.1 競合マトリクス

| サービス | 業界特化 | LINE連携 | スケジュール | 分析機能 | 日本市場 |
|:---|:---|:---|:---|:---|:---|
| **ServiceFlow（本製品）** | ◎ | ◎ | ○ | ◎ | ◎ |
| ONIKAN | ◎ | ✕ | △ | △ | ○ |
| センキャク | △ | ✕ | ○ | △ | ○ |
| プロワン | △ | ✕ | ○ | ○ | ○ |
| Housecall Pro | △ | ✕ | ○ | ◎ | ✕ |
| LINE CRM（Liny等） | ✕ | ◎ | ✕ | ✕ | ○ |

### 11.2 差別化ポイント

1. **LINE連携 × 業界特化**: 唯一無二の組み合わせ
2. **コールセンター連携**: 既存業務フローとのシームレスな統合
3. **オールインワン**: 案件管理 + スケジュール + 精算 + 分析を一元化
4. **シンプルなUI/UX**: IT不慣れなユーザーにも直感的に使えるデザイン

---

## 12. リポジトリ構成（現状）

```
ServiceFlow/
├── .cursorrules                        # Cursor AI ルール設定
├── CLAUDE.md                           # 開発指示書（技術スタック・規約）
├── README.md                           # プロジェクト概要
├── docs/                               # ドキュメント類
│   ├── spec.md                         #   プロジェクト仕様書（本ドキュメント）
│   ├── proposal.md                     #   共同開発提案書
│   ├── competitive-analysis.md         #   競合分析レポート
│   ├── requirements.docx               #   要件定義書（Word）
│   ├── meeting-minutes_2025-02-12.docx #   議事録（Word）
│   └── current-workflow.pdf            #   現行業務フロー図
└── prototype/                          # UIプロトタイプ
    └── ServiceFlow.html                #   React+Tailwind 単一ファイルプロトタイプ（1,889行）
```

### 12.1 プロトタイプ内のコンポーネント構成

```
ServiceFlow.html 内部構成
│
├── SECTION 1: SVG ICON SYSTEM           # 50以上のSVGアイコン定義
├── SECTION 2: SVG CHART COMPONENTS      # チャートコンポーネント
│   ├── BarSVG                           #   棒グラフ
│   ├── AreaSVG                          #   エリアチャート
│   └── Donut                            #   ドーナツチャート
│
├── SECTION 3: DATA & UTILITIES          # モックデータ・ユーティリティ
│   ├── CATS (6種)                       #   サービスカテゴリ定義
│   ├── ST (6種)                         #   ステータス定義
│   ├── CASES (200件)                    #   案件モックデータ
│   ├── LINE_MSGS (5件)                  #   LINEメッセージモックデータ
│   ├── SETTLEMENT (7件)                 #   精算モックデータ
│   ├── PLATFORMS (6種)                  #   広告プラットフォーム定義
│   └── LPS (8件)                        #   ランディングページモックデータ
│
├── SECTION 4: SHARED UI COMPONENTS      # 共通UIコンポーネント
│   ├── Badge                            #   ステータスバッジ
│   ├── Card                             #   コンテナカード
│   ├── Stat                             #   KPI統計カード
│   ├── Tab                              #   タブナビゲーション
│   ├── SearchInput                      #   検索入力
│   └── SubLabel                         #   セクションラベル
│
├── PAGE COMPONENTS                      # ページコンポーネント
│   ├── Dashboard                        #   ダッシュボード
│   ├── LineInbox                        #   LINE受信
│   ├── CaseMgmt                         #   案件管理
│   ├── CalView                          #   スケジュール（カレンダー）
│   ├── SettlementPage                   #   日報・精算
│   ├── Analytics                        #   売上分析
│   ├── AdLPPage                         #   広告・LP管理
│   ├── ReportsPage                      #   レポート
│   └── SetPage                          #   設定
│
└── SECTION 15: APP SHELL                # アプリケーションシェル
    ├── NAV_MAIN                         #   メインナビゲーション定義
    ├── NAV_UTIL                         #   ユーティリティナビゲーション定義
    └── App                              #   ルートコンポーネント（ルーティング）
```

---

## 13. 参照資料

| 資料 | URL/場所 |
|:---|:---|
| LINE Messaging API ドキュメント | https://developers.line.biz/ja/docs/messaging-api/ |
| Next.js ドキュメント | https://nextjs.org/docs |
| React Native (Expo) ドキュメント | https://docs.expo.dev/ |
| ONIKAN 公式サイト | https://beckon.co.jp/up-apps-2/onikan/ |
| センキャク 公式サイト | https://senkyaku.jp/ |
| プロワン 公式サイト | https://pro-one-cloud.com/ |
| Housecall Pro 公式サイト | https://www.housecallpro.com/ |
| Jobber 公式サイト | https://www.getjobber.com/ |

---

> **本ドキュメントは、プロジェクトの進行に伴い継続的に更新されます。**
